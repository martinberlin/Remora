<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Midi extractor for ORCΛ</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
  <script src="https://unpkg.com/@tonejs/midi"></script>
  <link rel="stylesheet" href="./style.css">
  
  
  <script>
  // load a midi file in the browser. await?
const midi = await Midi.fromUrl("midis/old-town-road.mid");

console.log(midi);
//the file name decoded from the first track
const name = midi.name;
//get the tracks
midi.tracks.forEach(track => {
  //tracks have notes and controlChanges

  //notes are an array
  const notes = track.notes
  notes.forEach(note => {
    console.log(note.midi, note.time, note.duration, note.name);
  })

  //the control changes are an object
  //the keys are the CC number
  track.controlChanges[64]
  //they are also aliased to the CC number's common name (if it has one)
  track.controlChanges.sustain.forEach(cc => {
    console.log(cc.ticks, cc.value, cc.time);
  })

  //the track also has a channel and instrument
  console.log(track.instrument.name);
})
</script>
</head>

<body>

<h4>Midi chord extractor for ORCΛ</h4>


<div id="responsebox">


</div>
</body>